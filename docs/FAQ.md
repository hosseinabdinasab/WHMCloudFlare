# سوالات متداول (FAQ) - WHMCloudFlare

## سوالات عمومی

### Q: WHMCloudFlare چیست؟
A: WHMCloudFlare یک ماژول برای WHM/cPanel است که به صورت خودکار رکوردهای DNS مورد نیاز سرور را در Cloudflare ایجاد می‌کند.

### Q: آیا این ماژول رایگان است؟
A: بله، این ماژول تحت مجوز MIT منتشر شده و کاملاً رایگان است.

### Q: چه نسخه‌ای از WHM/cPanel مورد نیاز است؟
A: WHM/cPanel نسخه 11.80 یا بالاتر.

---

## نصب و راه‌اندازی

### Q: چگونه ماژول را نصب کنم؟
A: ساده‌ترین روش استفاده از نصب کننده خودکار است:

```bash
git clone https://github.com/hosseinabdinasab/WHMCloudFlare.git
cd WHMCloudFlare
chmod +x install.sh
sudo ./install.sh
```

برای جزئیات بیشتر به [راهنمای نصب](../INSTALL.md) یا [راهنمای سریع](../QUICK_START.md) مراجعه کنید.

### Q: خطای "دسترسی غیرمجاز" می‌گیرم
A: مطمئن شوید که با کاربر root وارد WHM شده‌اید.

### Q: Hook ها اجرا نمی‌شوند
A: 
1. بررسی کنید که Hook ها در WHM ثبت شده‌اند: 
   ```bash
   /usr/local/cpanel/bin/manage_hooks list | grep WHMCloudFlare
   ```
   باید 4 Hook نمایش داده شود.

2. اگر Hook ها ثبت نشده‌اند، نصب کننده خودکار را دوباره اجرا کنید:
   ```bash
   cd /usr/local/cpanel/whm/addons/WHMCloudFlare
   sudo ./install.sh
   ```

3. بررسی لاگ‌ها: 
   ```bash
   tail -f /usr/local/cpanel/whm/addons/WHMCloudFlare/logs/*.log
   ```

---

## تنظیمات

### Q: API Token بهتر است یا API Key؟
A: API Token امن‌تر است و توصیه می‌شود.

### Q: Zone ID را از کجا پیدا کنم؟
A: در Cloudflare Dashboard، بخش Overview دامنه، Zone ID در سمت راست نمایش داده می‌شود.

### Q: چگونه چندین Zone را مدیریت کنم؟
A: از بخش Zone Mapping در تنظیمات، می‌توانید الگوهای دامنه را به Zone ID ها map کنید.

---

## مشکلات رایج

### Q: رکوردها ایجاد نمی‌شوند
A: 
1. بررسی کنید که ماژول فعال است
2. بررسی لاگ‌ها برای خطاها
3. تست اتصال به Cloudflare را انجام دهید
4. بررسی کنید که Zone ID صحیح است

### Q: خطای "Zone ID تنظیم نشده است"
A: Zone ID را در تنظیمات وارد کنید یا Zone Mapping را تنظیم کنید.

### Q: رکوردهای تکراری ایجاد می‌شوند
A: ماژول به صورت خودکار از ایجاد رکوردهای تکراری جلوگیری می‌کند. اگر این مشکل رخ داد، لاگ‌ها را بررسی کنید.

---

## SSL/TLS

### Q: چگونه SSL/TLS را خودکار مدیریت کنم؟
A: در تنظیمات، گزینه "مدیریت خودکار SSL/TLS" را فعال کنید و SSL Mode را انتخاب کنید.

### Q: تفاوت SSL Mode ها چیست؟
A:
- **off**: SSL غیرفعال
- **flexible**: SSL بین کاربر و Cloudflare
- **full**: SSL کامل (توصیه می‌شود)
- **strict**: SSL کامل با اعتبارسنجی سخت‌گیرانه

---

## امنیت

### Q: اطلاعات API Token/Key چگونه ذخیره می‌شوند؟
A: اطلاعات حساس با AES-256-CBC رمزنگاری می‌شوند.

### Q: Audit Log چیست؟
A: Audit Log تمام عملیات انجام شده را با جزئیات کامل ثبت می‌کند.

---

## عملکرد

### Q: Cache چگونه کار می‌کند؟
A: Cache برای کاهش درخواست‌های تکراری به API استفاده می‌شود. می‌توانید آن را در تنظیمات فعال/غیرفعال کنید.

### Q: Retry mechanism چیست؟
A: در صورت خطاهای موقت (مثل 429, 500, ...)، درخواست به صورت خودکار retry می‌شود.

---

## پشتیبانی

### Q: چگونه مشکل را گزارش کنم？
A: می‌توانید Issue در مخزن پروژه ایجاد کنید یا از طریق ایمیل تماس بگیرید.

### Q: آیا مستندات بیشتری وجود دارد؟
A: بله، فایل‌های مستندات در پوشه `docs/` قرار دارند.

